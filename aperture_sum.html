<!DOCTYPE html>
<!-- Generated by Cython 0.21.1 -->
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <style type="text/css">
    
body.cython { font-family: courier; font-size: 12; }

.cython.tag  {  }
.cython.line { margin: 0em }
.cython.code  { font-size: 9; color: #444444; display: none; margin: 0px 0px 0px 20px;  }

.cython.code .py_c_api  { color: red; }
.cython.code .py_macro_api  { color: #FF7000; }
.cython.code .pyx_c_api  { color: #FF3000; }
.cython.code .pyx_macro_api  { color: #FF7000; }
.cython.code .refnanny  { color: #FFA000; }
.cython.code .error_goto  { color: #FFA000; }

.cython.code .coerce  { color: #008000; border: 1px dotted #008000 }
.cython.code .py_attr { color: #FF0000; font-weight: bold; }
.cython.code .c_attr  { color: #0000FF; }
.cython.code .py_call { color: #FF0000; font-weight: bold; }
.cython.code .c_call  { color: #0000FF; }

.cython.score-0 {background-color: #FFFFff;}
.cython.score-1 {background-color: #FFFFe7;}
.cython.score-2 {background-color: #FFFFd4;}
.cython.score-3 {background-color: #FFFFc4;}
.cython.score-4 {background-color: #FFFFb6;}
.cython.score-5 {background-color: #FFFFaa;}
.cython.score-6 {background-color: #FFFF9f;}
.cython.score-7 {background-color: #FFFF96;}
.cython.score-8 {background-color: #FFFF8d;}
.cython.score-9 {background-color: #FFFF86;}
.cython.score-10 {background-color: #FFFF7f;}
.cython.score-11 {background-color: #FFFF79;}
.cython.score-12 {background-color: #FFFF73;}
.cython.score-13 {background-color: #FFFF6e;}
.cython.score-14 {background-color: #FFFF6a;}
.cython.score-15 {background-color: #FFFF66;}
.cython.score-16 {background-color: #FFFF62;}
.cython.score-17 {background-color: #FFFF5e;}
.cython.score-18 {background-color: #FFFF5b;}
.cython.score-19 {background-color: #FFFF57;}
.cython.score-20 {background-color: #FFFF55;}
.cython.score-21 {background-color: #FFFF52;}
.cython.score-22 {background-color: #FFFF4f;}
.cython.score-23 {background-color: #FFFF4d;}
.cython.score-24 {background-color: #FFFF4b;}
.cython.score-25 {background-color: #FFFF48;}
.cython.score-26 {background-color: #FFFF46;}
.cython.score-27 {background-color: #FFFF44;}
.cython.score-28 {background-color: #FFFF43;}
.cython.score-29 {background-color: #FFFF41;}
.cython.score-30 {background-color: #FFFF3f;}
.cython.score-31 {background-color: #FFFF3e;}
.cython.score-32 {background-color: #FFFF3c;}
.cython.score-33 {background-color: #FFFF3b;}
.cython.score-34 {background-color: #FFFF39;}
.cython.score-35 {background-color: #FFFF38;}
.cython.score-36 {background-color: #FFFF37;}
.cython.score-37 {background-color: #FFFF36;}
.cython.score-38 {background-color: #FFFF35;}
.cython.score-39 {background-color: #FFFF34;}
.cython.score-40 {background-color: #FFFF33;}
.cython.score-41 {background-color: #FFFF32;}
.cython.score-42 {background-color: #FFFF31;}
.cython.score-43 {background-color: #FFFF30;}
.cython.score-44 {background-color: #FFFF2f;}
.cython.score-45 {background-color: #FFFF2e;}
.cython.score-46 {background-color: #FFFF2d;}
.cython.score-47 {background-color: #FFFF2c;}
.cython.score-48 {background-color: #FFFF2b;}
.cython.score-49 {background-color: #FFFF2b;}
.cython.score-50 {background-color: #FFFF2a;}
.cython.score-51 {background-color: #FFFF29;}
.cython.score-52 {background-color: #FFFF29;}
.cython.score-53 {background-color: #FFFF28;}
.cython.score-54 {background-color: #FFFF27;}
.cython.score-55 {background-color: #FFFF27;}
.cython.score-56 {background-color: #FFFF26;}
.cython.score-57 {background-color: #FFFF26;}
.cython.score-58 {background-color: #FFFF25;}
.cython.score-59 {background-color: #FFFF24;}
.cython.score-60 {background-color: #FFFF24;}
.cython.score-61 {background-color: #FFFF23;}
.cython.score-62 {background-color: #FFFF23;}
.cython.score-63 {background-color: #FFFF22;}
.cython.score-64 {background-color: #FFFF22;}
.cython.score-65 {background-color: #FFFF22;}
.cython.score-66 {background-color: #FFFF21;}
.cython.score-67 {background-color: #FFFF21;}
.cython.score-68 {background-color: #FFFF20;}
.cython.score-69 {background-color: #FFFF20;}
.cython.score-70 {background-color: #FFFF1f;}
.cython.score-71 {background-color: #FFFF1f;}
.cython.score-72 {background-color: #FFFF1f;}
.cython.score-73 {background-color: #FFFF1e;}
.cython.score-74 {background-color: #FFFF1e;}
.cython.score-75 {background-color: #FFFF1e;}
.cython.score-76 {background-color: #FFFF1d;}
.cython.score-77 {background-color: #FFFF1d;}
.cython.score-78 {background-color: #FFFF1c;}
.cython.score-79 {background-color: #FFFF1c;}
.cython.score-80 {background-color: #FFFF1c;}
.cython.score-81 {background-color: #FFFF1c;}
.cython.score-82 {background-color: #FFFF1b;}
.cython.score-83 {background-color: #FFFF1b;}
.cython.score-84 {background-color: #FFFF1b;}
.cython.score-85 {background-color: #FFFF1a;}
.cython.score-86 {background-color: #FFFF1a;}
.cython.score-87 {background-color: #FFFF1a;}
.cython.score-88 {background-color: #FFFF1a;}
.cython.score-89 {background-color: #FFFF19;}
.cython.score-90 {background-color: #FFFF19;}
.cython.score-91 {background-color: #FFFF19;}
.cython.score-92 {background-color: #FFFF19;}
.cython.score-93 {background-color: #FFFF18;}
.cython.score-94 {background-color: #FFFF18;}
.cython.score-95 {background-color: #FFFF18;}
.cython.score-96 {background-color: #FFFF18;}
.cython.score-97 {background-color: #FFFF17;}
.cython.score-98 {background-color: #FFFF17;}
.cython.score-99 {background-color: #FFFF17;}
.cython.score-100 {background-color: #FFFF17;}
.cython.score-101 {background-color: #FFFF16;}
.cython.score-102 {background-color: #FFFF16;}
.cython.score-103 {background-color: #FFFF16;}
.cython.score-104 {background-color: #FFFF16;}
.cython.score-105 {background-color: #FFFF16;}
.cython.score-106 {background-color: #FFFF15;}
.cython.score-107 {background-color: #FFFF15;}
.cython.score-108 {background-color: #FFFF15;}
.cython.score-109 {background-color: #FFFF15;}
.cython.score-110 {background-color: #FFFF15;}
.cython.score-111 {background-color: #FFFF15;}
.cython.score-112 {background-color: #FFFF14;}
.cython.score-113 {background-color: #FFFF14;}
.cython.score-114 {background-color: #FFFF14;}
.cython.score-115 {background-color: #FFFF14;}
.cython.score-116 {background-color: #FFFF14;}
.cython.score-117 {background-color: #FFFF14;}
.cython.score-118 {background-color: #FFFF13;}
.cython.score-119 {background-color: #FFFF13;}
.cython.score-120 {background-color: #FFFF13;}
.cython.score-121 {background-color: #FFFF13;}
.cython.score-122 {background-color: #FFFF13;}
.cython.score-123 {background-color: #FFFF13;}
.cython.score-124 {background-color: #FFFF13;}
.cython.score-125 {background-color: #FFFF12;}
.cython.score-126 {background-color: #FFFF12;}
.cython.score-127 {background-color: #FFFF12;}
.cython.score-128 {background-color: #FFFF12;}
.cython.score-129 {background-color: #FFFF12;}
.cython.score-130 {background-color: #FFFF12;}
.cython.score-131 {background-color: #FFFF12;}
.cython.score-132 {background-color: #FFFF11;}
.cython.score-133 {background-color: #FFFF11;}
.cython.score-134 {background-color: #FFFF11;}
.cython.score-135 {background-color: #FFFF11;}
.cython.score-136 {background-color: #FFFF11;}
.cython.score-137 {background-color: #FFFF11;}
.cython.score-138 {background-color: #FFFF11;}
.cython.score-139 {background-color: #FFFF11;}
.cython.score-140 {background-color: #FFFF11;}
.cython.score-141 {background-color: #FFFF10;}
.cython.score-142 {background-color: #FFFF10;}
.cython.score-143 {background-color: #FFFF10;}
.cython.score-144 {background-color: #FFFF10;}
.cython.score-145 {background-color: #FFFF10;}
.cython.score-146 {background-color: #FFFF10;}
.cython.score-147 {background-color: #FFFF10;}
.cython.score-148 {background-color: #FFFF10;}
.cython.score-149 {background-color: #FFFF10;}
.cython.score-150 {background-color: #FFFF0f;}
.cython.score-151 {background-color: #FFFF0f;}
.cython.score-152 {background-color: #FFFF0f;}
.cython.score-153 {background-color: #FFFF0f;}
.cython.score-154 {background-color: #FFFF0f;}
.cython.score-155 {background-color: #FFFF0f;}
.cython.score-156 {background-color: #FFFF0f;}
.cython.score-157 {background-color: #FFFF0f;}
.cython.score-158 {background-color: #FFFF0f;}
.cython.score-159 {background-color: #FFFF0f;}
.cython.score-160 {background-color: #FFFF0f;}
.cython.score-161 {background-color: #FFFF0e;}
.cython.score-162 {background-color: #FFFF0e;}
.cython.score-163 {background-color: #FFFF0e;}
.cython.score-164 {background-color: #FFFF0e;}
.cython.score-165 {background-color: #FFFF0e;}
.cython.score-166 {background-color: #FFFF0e;}
.cython.score-167 {background-color: #FFFF0e;}
.cython.score-168 {background-color: #FFFF0e;}
.cython.score-169 {background-color: #FFFF0e;}
.cython.score-170 {background-color: #FFFF0e;}
.cython.score-171 {background-color: #FFFF0e;}
.cython.score-172 {background-color: #FFFF0e;}
.cython.score-173 {background-color: #FFFF0d;}
.cython.score-174 {background-color: #FFFF0d;}
.cython.score-175 {background-color: #FFFF0d;}
.cython.score-176 {background-color: #FFFF0d;}
.cython.score-177 {background-color: #FFFF0d;}
.cython.score-178 {background-color: #FFFF0d;}
.cython.score-179 {background-color: #FFFF0d;}
.cython.score-180 {background-color: #FFFF0d;}
.cython.score-181 {background-color: #FFFF0d;}
.cython.score-182 {background-color: #FFFF0d;}
.cython.score-183 {background-color: #FFFF0d;}
.cython.score-184 {background-color: #FFFF0d;}
.cython.score-185 {background-color: #FFFF0d;}
.cython.score-186 {background-color: #FFFF0d;}
.cython.score-187 {background-color: #FFFF0c;}
.cython.score-188 {background-color: #FFFF0c;}
.cython.score-189 {background-color: #FFFF0c;}
.cython.score-190 {background-color: #FFFF0c;}
.cython.score-191 {background-color: #FFFF0c;}
.cython.score-192 {background-color: #FFFF0c;}
.cython.score-193 {background-color: #FFFF0c;}
.cython.score-194 {background-color: #FFFF0c;}
.cython.score-195 {background-color: #FFFF0c;}
.cython.score-196 {background-color: #FFFF0c;}
.cython.score-197 {background-color: #FFFF0c;}
.cython.score-198 {background-color: #FFFF0c;}
.cython.score-199 {background-color: #FFFF0c;}
.cython.score-200 {background-color: #FFFF0c;}
.cython.score-201 {background-color: #FFFF0c;}
.cython.score-202 {background-color: #FFFF0c;}
.cython.score-203 {background-color: #FFFF0b;}
.cython.score-204 {background-color: #FFFF0b;}
.cython.score-205 {background-color: #FFFF0b;}
.cython.score-206 {background-color: #FFFF0b;}
.cython.score-207 {background-color: #FFFF0b;}
.cython.score-208 {background-color: #FFFF0b;}
.cython.score-209 {background-color: #FFFF0b;}
.cython.score-210 {background-color: #FFFF0b;}
.cython.score-211 {background-color: #FFFF0b;}
.cython.score-212 {background-color: #FFFF0b;}
.cython.score-213 {background-color: #FFFF0b;}
.cython.score-214 {background-color: #FFFF0b;}
.cython.score-215 {background-color: #FFFF0b;}
.cython.score-216 {background-color: #FFFF0b;}
.cython.score-217 {background-color: #FFFF0b;}
.cython.score-218 {background-color: #FFFF0b;}
.cython.score-219 {background-color: #FFFF0b;}
.cython.score-220 {background-color: #FFFF0b;}
.cython.score-221 {background-color: #FFFF0b;}
.cython.score-222 {background-color: #FFFF0a;}
.cython.score-223 {background-color: #FFFF0a;}
.cython.score-224 {background-color: #FFFF0a;}
.cython.score-225 {background-color: #FFFF0a;}
.cython.score-226 {background-color: #FFFF0a;}
.cython.score-227 {background-color: #FFFF0a;}
.cython.score-228 {background-color: #FFFF0a;}
.cython.score-229 {background-color: #FFFF0a;}
.cython.score-230 {background-color: #FFFF0a;}
.cython.score-231 {background-color: #FFFF0a;}
.cython.score-232 {background-color: #FFFF0a;}
.cython.score-233 {background-color: #FFFF0a;}
.cython.score-234 {background-color: #FFFF0a;}
.cython.score-235 {background-color: #FFFF0a;}
.cython.score-236 {background-color: #FFFF0a;}
.cython.score-237 {background-color: #FFFF0a;}
.cython.score-238 {background-color: #FFFF0a;}
.cython.score-239 {background-color: #FFFF0a;}
.cython.score-240 {background-color: #FFFF0a;}
.cython.score-241 {background-color: #FFFF0a;}
.cython.score-242 {background-color: #FFFF0a;}
.cython.score-243 {background-color: #FFFF0a;}
.cython.score-244 {background-color: #FFFF0a;}
.cython.score-245 {background-color: #FFFF0a;}
.cython.score-246 {background-color: #FFFF09;}
.cython.score-247 {background-color: #FFFF09;}
.cython.score-248 {background-color: #FFFF09;}
.cython.score-249 {background-color: #FFFF09;}
.cython.score-250 {background-color: #FFFF09;}
.cython.score-251 {background-color: #FFFF09;}
.cython.score-252 {background-color: #FFFF09;}
.cython.score-253 {background-color: #FFFF09;}
.cython.score-254 {background-color: #FFFF09;}.cython .hll { background-color: #ffffcc }
.cython  { background: #f8f8f8; }
.cython .c { color: #408080; font-style: italic } /* Comment */
.cython .err { border: 1px solid #FF0000 } /* Error */
.cython .k { color: #008000; font-weight: bold } /* Keyword */
.cython .o { color: #666666 } /* Operator */
.cython .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.cython .cp { color: #BC7A00 } /* Comment.Preproc */
.cython .c1 { color: #408080; font-style: italic } /* Comment.Single */
.cython .cs { color: #408080; font-style: italic } /* Comment.Special */
.cython .gd { color: #A00000 } /* Generic.Deleted */
.cython .ge { font-style: italic } /* Generic.Emph */
.cython .gr { color: #FF0000 } /* Generic.Error */
.cython .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.cython .gi { color: #00A000 } /* Generic.Inserted */
.cython .go { color: #888888 } /* Generic.Output */
.cython .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.cython .gs { font-weight: bold } /* Generic.Strong */
.cython .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.cython .gt { color: #0044DD } /* Generic.Traceback */
.cython .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.cython .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.cython .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.cython .kp { color: #008000 } /* Keyword.Pseudo */
.cython .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.cython .kt { color: #B00040 } /* Keyword.Type */
.cython .m { color: #666666 } /* Literal.Number */
.cython .s { color: #BA2121 } /* Literal.String */
.cython .na { color: #7D9029 } /* Name.Attribute */
.cython .nb { color: #008000 } /* Name.Builtin */
.cython .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.cython .no { color: #880000 } /* Name.Constant */
.cython .nd { color: #AA22FF } /* Name.Decorator */
.cython .ni { color: #999999; font-weight: bold } /* Name.Entity */
.cython .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.cython .nf { color: #0000FF } /* Name.Function */
.cython .nl { color: #A0A000 } /* Name.Label */
.cython .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.cython .nt { color: #008000; font-weight: bold } /* Name.Tag */
.cython .nv { color: #19177C } /* Name.Variable */
.cython .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.cython .w { color: #bbbbbb } /* Text.Whitespace */
.cython .mf { color: #666666 } /* Literal.Number.Float */
.cython .mh { color: #666666 } /* Literal.Number.Hex */
.cython .mi { color: #666666 } /* Literal.Number.Integer */
.cython .mo { color: #666666 } /* Literal.Number.Oct */
.cython .sb { color: #BA2121 } /* Literal.String.Backtick */
.cython .sc { color: #BA2121 } /* Literal.String.Char */
.cython .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.cython .s2 { color: #BA2121 } /* Literal.String.Double */
.cython .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.cython .sh { color: #BA2121 } /* Literal.String.Heredoc */
.cython .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.cython .sx { color: #008000 } /* Literal.String.Other */
.cython .sr { color: #BB6688 } /* Literal.String.Regex */
.cython .s1 { color: #BA2121 } /* Literal.String.Single */
.cython .ss { color: #19177C } /* Literal.String.Symbol */
.cython .bp { color: #008000 } /* Name.Builtin.Pseudo */
.cython .vc { color: #19177C } /* Name.Variable.Class */
.cython .vg { color: #19177C } /* Name.Variable.Global */
.cython .vi { color: #19177C } /* Name.Variable.Instance */
.cython .il { color: #666666 } /* Literal.Number.Integer.Long */
    </style>
    <script>
    function toggleDiv(id) {
        theDiv = id.nextElementSibling
        if (theDiv.style.display != 'block') theDiv.style.display = 'block';
        else theDiv.style.display = 'none';
    }
    </script>
</head>
<body class="cython">
<p>Generated by Cython 0.21.1</p>
<p>Raw output: <a href="aperture_sum.c">aperture_sum.c</a></p>
<div class="cython"><pre class='cython line score-0'>&#xA0;01: <span class="k">cimport</span> <span class="nn">cython</span></pre>
<pre class='cython line score-0'>&#xA0;02: <span class="k">from</span> <span class="nn">libc.math</span> <span class="k">cimport</span> <span class="n">exp</span></pre>
<pre class='cython line score-0'>&#xA0;03: </pre>
<pre class='cython line score-0'>&#xA0;04: <span class="nd">@cython</span><span class="o">.</span><span class="n">cdivision</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span></pre>
<pre class='cython line score-0'>&#xA0;05: <span class="nd">@cython</span><span class="o">.</span><span class="n">boundscheck</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class='cython line score-90' onclick='toggleDiv(this)'>+06: <span class="k">def</span> <span class="nf">aperture_sum</span><span class="p">(</span><span class="n">double</span> <span class="n">fwhm</span><span class="p">,</span> <span class="n">double</span> <span class="n">radius</span><span class="p">,</span> <span class="n">double</span> <span class="n">pixsize</span><span class="p">,</span> <span class="nb">int</span> <span class="n">max_pix_rad</span><span class="p">,</span> <span class="nb">int</span> <span class="n">piece</span><span class="p">):</span></pre>
<pre class='cython code score-90'>/* Python wrapper */
static PyObject *__pyx_pw_12aperture_sum_1aperture_sum(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_12aperture_sum_aperture_sum[] = "\n    Figure out what fraction of a star's light falls within he aperture.  We assume that\n    the starlight has a circular gaussian distribution with FWHM given by the first argument\n    (with units of arcsec).\n\n    This function goes to the trouble of calculating how much of the light falls within\n    fractional pixels defined by the given radius of a synthetic aperture.\n\n    This function is called from functions.fraction_inside_cython which does a few checks on the\n    data first\n\n    :param fwhm: FWHM in arcsec\n    :param radius: radius of aperture, in arcsec\n    :param pixsize: size of a pixel, in arcsec\n    :param max_pix_rad: maximum pixel radius\n    :param piece: how many pieces do we sub-divide pixels into\n    :return:the fraction of light within aperture\n    ";
static PyMethodDef __pyx_mdef_12aperture_sum_1aperture_sum = {"aperture_sum", (PyCFunction)__pyx_pw_12aperture_sum_1aperture_sum, METH_VARARGS|METH_KEYWORDS, __pyx_doc_12aperture_sum_aperture_sum};
static PyObject *__pyx_pw_12aperture_sum_1aperture_sum(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  double __pyx_v_fwhm;
  double __pyx_v_radius;
  CYTHON_UNUSED double __pyx_v_pixsize;
  int __pyx_v_max_pix_rad;
  int __pyx_v_piece;
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("aperture_sum (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&amp;__pyx_n_s_fwhm,&amp;__pyx_n_s_radius,&amp;__pyx_n_s_pixsize,&amp;__pyx_n_s_max_pix_rad,&amp;__pyx_n_s_piece,0};
    PyObject* values[5] = {0,0,0,0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args);
      switch (pos_args) {
        case  5: values[4] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 4);
        case  4: values[3] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 3);
        case  3: values[2] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 2);
        case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
        case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s_fwhm)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        case  1:
        if (likely((values[1] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s_radius)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("aperture_sum", 1, 5, 5, 1); <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 6; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
        }
        case  2:
        if (likely((values[2] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s_pixsize)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("aperture_sum", 1, 5, 5, 2); <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 6; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
        }
        case  3:
        if (likely((values[3] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s_max_pix_rad)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("aperture_sum", 1, 5, 5, 3); <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 6; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
        }
        case  4:
        if (likely((values[4] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s_piece)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("aperture_sum", 1, 5, 5, 4); <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 6; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
        }
      }
      if (unlikely(kw_args &gt; 0)) {
        if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "aperture_sum") &lt; 0)) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 6; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
      }
    } else if (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args) != 5) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
      values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
      values[2] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 2);
      values[3] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 3);
      values[4] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 4);
    }
    __pyx_v_fwhm = __pyx_<span class='py_c_api'>PyFloat_AsDouble</span>(values[0]);<span class='error_goto'> if (unlikely((__pyx_v_fwhm == (double)-1) &amp;&amp; PyErr_Occurred())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 6; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    __pyx_v_radius = __pyx_<span class='py_c_api'>PyFloat_AsDouble</span>(values[1]);<span class='error_goto'> if (unlikely((__pyx_v_radius == (double)-1) &amp;&amp; PyErr_Occurred())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 6; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    __pyx_v_pixsize = __pyx_<span class='py_c_api'>PyFloat_AsDouble</span>(values[2]);<span class='error_goto'> if (unlikely((__pyx_v_pixsize == (double)-1) &amp;&amp; PyErr_Occurred())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 6; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    __pyx_v_max_pix_rad = <span class='pyx_c_api'>__Pyx_PyInt_As_int</span>(values[3]);<span class='error_goto'> if (unlikely((__pyx_v_max_pix_rad == (int)-1) &amp;&amp; PyErr_Occurred())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 6; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    __pyx_v_piece = <span class='pyx_c_api'>__Pyx_PyInt_As_int</span>(values[4]);<span class='error_goto'> if (unlikely((__pyx_v_piece == (int)-1) &amp;&amp; PyErr_Occurred())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 6; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("aperture_sum", 1, 5, 5, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)); <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 6; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("aperture_sum.aperture_sum", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_12aperture_sum_aperture_sum(__pyx_self, __pyx_v_fwhm, __pyx_v_radius, __pyx_v_pixsize, __pyx_v_max_pix_rad, __pyx_v_piece);
  int __pyx_lineno = 0;
  const char *__pyx_filename = NULL;
  int __pyx_clineno = 0;

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_12aperture_sum_aperture_sum(CYTHON_UNUSED PyObject *__pyx_self, double __pyx_v_fwhm, double __pyx_v_radius, CYTHON_UNUSED double __pyx_v_pixsize, int __pyx_v_max_pix_rad, int __pyx_v_piece) {
  double __pyx_v_psf_center_x;
  double __pyx_v_psf_center_y;
  double __pyx_v_sigma2;
  double __pyx_v_radius2;
  double __pyx_v_bit;
  double __pyx_v_rad_sum;
  double __pyx_v_all_sum;
  int __pyx_v_start;
  int __pyx_v_stop;
  int __pyx_v_i;
  int __pyx_v_j;
  int __pyx_v_k;
  int __pyx_v_l;
  double __pyx_v_pix_sum;
  double __pyx_v_x;
  double __pyx_v_fx;
  double __pyx_v_y;
  double __pyx_v_fy;
  double __pyx_v_inten;
  double __pyx_v_this_bit;
  double __pyx_v_rad2;
  double __pyx_v_ratio;
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("aperture_sum", 0);
/* … */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_10);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("aperture_sum.aperture_sum", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
/* … */
  __pyx_tuple_ = <span class='py_c_api'>PyTuple_Pack</span>(27, __pyx_n_s_fwhm, __pyx_n_s_radius, __pyx_n_s_pixsize, __pyx_n_s_max_pix_rad, __pyx_n_s_piece, __pyx_n_s_psf_center_x, __pyx_n_s_psf_center_y, __pyx_n_s_sigma2, __pyx_n_s_radius2, __pyx_n_s_bit, __pyx_n_s_rad_sum, __pyx_n_s_all_sum, __pyx_n_s_start, __pyx_n_s_stop, __pyx_n_s_i, __pyx_n_s_j, __pyx_n_s_k, __pyx_n_s_l, __pyx_n_s_pix_sum, __pyx_n_s_x, __pyx_n_s_fx, __pyx_n_s_y, __pyx_n_s_fy, __pyx_n_s_inten, __pyx_n_s_this_bit, __pyx_n_s_rad2, __pyx_n_s_ratio);<span class='error_goto'> if (unlikely(!__pyx_tuple_)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 6; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple_);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple_);
/* … */
  __pyx_t_1 = PyCFunction_NewEx(&amp;__pyx_mdef_12aperture_sum_1aperture_sum, NULL, __pyx_n_s_aperture_sum);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 6; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_aperture_sum, __pyx_t_1) &lt; 0) <span class='error_goto'>{__pyx_filename = __pyx_f[0]; __pyx_lineno = 6; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class='cython line score-0'>&#xA0;07:     <span class="sd">&quot;&quot;&quot;</span></pre>
<pre class='cython line score-0'>&#xA0;08: <span class="sd">    Figure out what fraction of a star&#39;s light falls within he aperture.  We assume that</span></pre>
<pre class='cython line score-0'>&#xA0;09: <span class="sd">    the starlight has a circular gaussian distribution with FWHM given by the first argument</span></pre>
<pre class='cython line score-0'>&#xA0;10: <span class="sd">    (with units of arcsec).</span></pre>
<pre class='cython line score-0'>&#xA0;11: </pre>
<pre class='cython line score-0'>&#xA0;12: <span class="sd">    This function goes to the trouble of calculating how much of the light falls within</span></pre>
<pre class='cython line score-0'>&#xA0;13: <span class="sd">    fractional pixels defined by the given radius of a synthetic aperture.</span></pre>
<pre class='cython line score-0'>&#xA0;14: </pre>
<pre class='cython line score-0'>&#xA0;15: <span class="sd">    This function is called from functions.fraction_inside_cython which does a few checks on the</span></pre>
<pre class='cython line score-0'>&#xA0;16: <span class="sd">    data first</span></pre>
<pre class='cython line score-0'>&#xA0;17: </pre>
<pre class='cython line score-0'>&#xA0;18: <span class="sd">    :param fwhm: FWHM in arcsec</span></pre>
<pre class='cython line score-0'>&#xA0;19: <span class="sd">    :param radius: radius of aperture, in arcsec</span></pre>
<pre class='cython line score-0'>&#xA0;20: <span class="sd">    :param pixsize: size of a pixel, in arcsec</span></pre>
<pre class='cython line score-0'>&#xA0;21: <span class="sd">    :param max_pix_rad: maximum pixel radius</span></pre>
<pre class='cython line score-0'>&#xA0;22: <span class="sd">    :param piece: how many pieces do we sub-divide pixels into</span></pre>
<pre class='cython line score-0'>&#xA0;23: <span class="sd">    :return:the fraction of light within aperture</span></pre>
<pre class='cython line score-0'>&#xA0;24: <span class="sd">    &quot;&quot;&quot;</span></pre>
<pre class='cython line score-0' onclick='toggleDiv(this)'>+25:     <span class="k">cdef</span> <span class="kt">double</span> <span class="nf">psf_center_x</span> <span class="o">=</span> <span class="mf">0.5</span></pre>
<pre class='cython code score-0'>  __pyx_v_psf_center_x = 0.5;
</pre><pre class='cython line score-0' onclick='toggleDiv(this)'>+26:     <span class="k">cdef</span> <span class="kt">double</span> <span class="nf">psf_center_y</span> <span class="o">=</span> <span class="mf">0.5</span></pre>
<pre class='cython code score-0'>  __pyx_v_psf_center_y = 0.5;
</pre><pre class='cython line score-0'>&#xA0;27: </pre>
<pre class='cython line score-0' onclick='toggleDiv(this)'>+28:     <span class="k">cdef</span> <span class="kt">double</span> <span class="nf">sigma2</span> <span class="o">=</span> <span class="p">(</span><span class="n">fwhm</span> <span class="o">/</span> <span class="mf">2.35</span><span class="p">)</span> <span class="o">**</span> <span class="mf">2</span></pre>
<pre class='cython code score-0'>  __pyx_v_sigma2 = pow((__pyx_v_fwhm / 2.35), 2.0);
</pre><pre class='cython line score-0' onclick='toggleDiv(this)'>+29:     <span class="k">cdef</span> <span class="kt">double</span> <span class="nf">radius2</span> <span class="o">=</span> <span class="n">radius</span> <span class="o">**</span> <span class="mf">2</span></pre>
<pre class='cython code score-0'>  __pyx_v_radius2 = pow(__pyx_v_radius, 2.0);
</pre><pre class='cython line score-0' onclick='toggleDiv(this)'>+30:     <span class="k">cdef</span> <span class="kt">double</span> <span class="nf">bit</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">piece</span></pre>
<pre class='cython code score-0'>  __pyx_v_bit = (1.0 / __pyx_v_piece);
</pre><pre class='cython line score-0'>&#xA0;31: </pre>
<pre class='cython line score-0' onclick='toggleDiv(this)'>+32:     <span class="k">cdef</span> <span class="kt">double</span> <span class="nf">rad_sum</span> <span class="o">=</span> <span class="mf">0.0</span></pre>
<pre class='cython code score-0'>  __pyx_v_rad_sum = 0.0;
</pre><pre class='cython line score-0' onclick='toggleDiv(this)'>+33:     <span class="k">cdef</span> <span class="kt">double</span> <span class="nf">all_sum</span> <span class="o">=</span> <span class="mf">0.0</span></pre>
<pre class='cython code score-0'>  __pyx_v_all_sum = 0.0;
</pre><pre class='cython line score-0'>&#xA0;34: </pre>
<pre class='cython line score-0' onclick='toggleDiv(this)'>+35:     <span class="k">cdef</span> <span class="kt">int</span> <span class="nf">start</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="mf">0.0</span> <span class="o">-</span> <span class="n">max_pix_rad</span><span class="p">)</span></pre>
<pre class='cython code score-0'>  __pyx_v_start = ((int)(0.0 - __pyx_v_max_pix_rad));
</pre><pre class='cython line score-0' onclick='toggleDiv(this)'>+36:     <span class="k">cdef</span> <span class="kt">int</span> <span class="nf">stop</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">max_pix_rad</span><span class="p">)</span></pre>
<pre class='cython code score-0'>  __pyx_v_stop = __pyx_v_max_pix_rad;
</pre><pre class='cython line score-0'>&#xA0;37: </pre>
<pre class='cython line score-0'>&#xA0;38:     <span class="k">cdef</span> <span class="kt">int</span> <span class="nf">i</span><span class="p">,</span> <span class="nf">j</span><span class="p">,</span> <span class="nf">k</span><span class="p">,</span> <span class="nf">l</span></pre>
<pre class='cython line score-0'>&#xA0;39:     <span class="k">cdef</span> <span class="kt">double</span> <span class="nf">pix_sum</span><span class="p">,</span> <span class="nf">x</span><span class="p">,</span> <span class="nf">fx</span><span class="p">,</span> <span class="nf">y</span><span class="p">,</span> <span class="nf">fy</span><span class="p">,</span> <span class="nf">inten</span><span class="p">,</span> <span class="nf">this_bit</span><span class="p">,</span> <span class="nf">rad2</span></pre>
<pre class='cython line score-0'>&#xA0;40: </pre>
<pre class='cython line score-0' onclick='toggleDiv(this)'>+41:     <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="p">):</span></pre>
<pre class='cython code score-0'>  __pyx_t_1 = __pyx_v_stop;
  for (__pyx_t_2 = __pyx_v_start; __pyx_t_2 &lt; __pyx_t_1; __pyx_t_2+=1) {
    __pyx_v_i = __pyx_t_2;
</pre><pre class='cython line score-0' onclick='toggleDiv(this)'>+42:         <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">stop</span><span class="p">):</span></pre>
<pre class='cython code score-0'>    __pyx_t_3 = __pyx_v_stop;
    for (__pyx_t_4 = __pyx_v_start; __pyx_t_4 &lt; __pyx_t_3; __pyx_t_4+=1) {
      __pyx_v_j = __pyx_t_4;
</pre><pre class='cython line score-0' onclick='toggleDiv(this)'>+43:             <span class="n">pix_sum</span> <span class="o">=</span> <span class="mf">0.0</span></pre>
<pre class='cython code score-0'>      __pyx_v_pix_sum = 0.0;
</pre><pre class='cython line score-0'>&#xA0;44: </pre>
<pre class='cython line score-0' onclick='toggleDiv(this)'>+45:             <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span> <span class="n">piece</span><span class="p">):</span></pre>
<pre class='cython code score-0'>      __pyx_t_5 = __pyx_v_piece;
      for (__pyx_t_6 = 0; __pyx_t_6 &lt; __pyx_t_5; __pyx_t_6+=1) {
        __pyx_v_k = __pyx_t_6;
</pre><pre class='cython line score-0' onclick='toggleDiv(this)'>+46:                 <span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="n">psf_center_x</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">k</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">*</span> <span class="n">bit</span></pre>
<pre class='cython code score-0'>        __pyx_v_x = ((__pyx_v_i - __pyx_v_psf_center_x) + ((__pyx_v_k + 0.5) * __pyx_v_bit));
</pre><pre class='cython line score-0' onclick='toggleDiv(this)'>+47:                 <span class="n">fx</span> <span class="o">=</span> <span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="n">x</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mf">2.0</span> <span class="o">*</span> <span class="n">sigma2</span><span class="p">))</span></pre>
<pre class='cython code score-0'>        __pyx_v_fx = exp(((-(__pyx_v_x * __pyx_v_x)) / (2.0 * __pyx_v_sigma2)));
</pre><pre class='cython line score-0'>&#xA0;48: </pre>
<pre class='cython line score-0' onclick='toggleDiv(this)'>+49:                 <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mf">0</span><span class="p">,</span> <span class="n">piece</span><span class="p">):</span></pre>
<pre class='cython code score-0'>        __pyx_t_7 = __pyx_v_piece;
        for (__pyx_t_8 = 0; __pyx_t_8 &lt; __pyx_t_7; __pyx_t_8+=1) {
          __pyx_v_l = __pyx_t_8;
</pre><pre class='cython line score-0' onclick='toggleDiv(this)'>+50:                     <span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="n">j</span> <span class="o">-</span> <span class="n">psf_center_y</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">l</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">*</span> <span class="n">bit</span></pre>
<pre class='cython code score-0'>          __pyx_v_y = ((__pyx_v_j - __pyx_v_psf_center_y) + ((__pyx_v_l + 0.5) * __pyx_v_bit));
</pre><pre class='cython line score-0' onclick='toggleDiv(this)'>+51:                     <span class="n">fy</span> <span class="o">=</span> <span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="n">y</span> <span class="o">*</span> <span class="n">y</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mf">2.0</span> <span class="o">*</span> <span class="n">sigma2</span><span class="p">))</span></pre>
<pre class='cython code score-0'>          __pyx_v_fy = exp(((-(__pyx_v_y * __pyx_v_y)) / (2.0 * __pyx_v_sigma2)));
</pre><pre class='cython line score-0' onclick='toggleDiv(this)'>+52:                     <span class="n">inten</span> <span class="o">=</span> <span class="n">fx</span> <span class="o">*</span> <span class="n">fy</span></pre>
<pre class='cython code score-0'>          __pyx_v_inten = (__pyx_v_fx * __pyx_v_fy);
</pre><pre class='cython line score-0' onclick='toggleDiv(this)'>+53:                     <span class="n">this_bit</span> <span class="o">=</span> <span class="n">inten</span> <span class="o">*</span> <span class="n">bit</span> <span class="o">*</span> <span class="n">bit</span></pre>
<pre class='cython code score-0'>          __pyx_v_this_bit = ((__pyx_v_inten * __pyx_v_bit) * __pyx_v_bit);
</pre><pre class='cython line score-0' onclick='toggleDiv(this)'>+54:                     <span class="n">pix_sum</span> <span class="o">+=</span> <span class="n">this_bit</span></pre>
<pre class='cython code score-0'>          __pyx_v_pix_sum = (__pyx_v_pix_sum + __pyx_v_this_bit);
</pre><pre class='cython line score-0' onclick='toggleDiv(this)'>+55:                     <span class="n">rad2</span> <span class="o">=</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">*</span> <span class="n">y</span></pre>
<pre class='cython code score-0'>          __pyx_v_rad2 = ((__pyx_v_x * __pyx_v_x) + (__pyx_v_y * __pyx_v_y));
</pre><pre class='cython line score-0' onclick='toggleDiv(this)'>+56:                     <span class="k">if</span> <span class="n">rad2</span> <span class="o">&lt;=</span> <span class="n">radius2</span><span class="p">:</span></pre>
<pre class='cython code score-0'>          __pyx_t_9 = ((__pyx_v_rad2 &lt;= __pyx_v_radius2) != 0);
          if (__pyx_t_9) {
</pre><pre class='cython line score-0' onclick='toggleDiv(this)'>+57:                         <span class="n">rad_sum</span> <span class="o">+=</span> <span class="n">this_bit</span></pre>
<pre class='cython code score-0'>            __pyx_v_rad_sum = (__pyx_v_rad_sum + __pyx_v_this_bit);
            goto __pyx_L11;
          }
          __pyx_L11:;
        }
      }
</pre><pre class='cython line score-0'>&#xA0;58: </pre>
<pre class='cython line score-0' onclick='toggleDiv(this)'>+59:             <span class="n">all_sum</span> <span class="o">+=</span> <span class="n">pix_sum</span></pre>
<pre class='cython code score-0'>      __pyx_v_all_sum = (__pyx_v_all_sum + __pyx_v_pix_sum);
    }
  }
</pre><pre class='cython line score-0'>&#xA0;60: </pre>
<pre class='cython line score-0' onclick='toggleDiv(this)'>+61:     <span class="k">cdef</span> <span class="kt">double</span> <span class="nf">ratio</span> <span class="o">=</span> <span class="n">rad_sum</span> <span class="o">/</span> <span class="n">all_sum</span></pre>
<pre class='cython code score-0'>  __pyx_v_ratio = (__pyx_v_rad_sum / __pyx_v_all_sum);
</pre><pre class='cython line score-6' onclick='toggleDiv(this)'>+62:     <span class="k">return</span> <span class="n">ratio</span></pre>
<pre class='cython code score-6'>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_10 = <span class='py_c_api'>PyFloat_FromDouble</span>(__pyx_v_ratio);<span class='error_goto'> if (unlikely(!__pyx_t_10)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 62; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_10);
  __pyx_r = __pyx_t_10;
  __pyx_t_10 = 0;
  goto __pyx_L0;
</pre><pre class='cython line score-0'>&#xA0;63: </pre>
<pre class='cython line score-0'>&#xA0;64: </pre>
</div></body></html>
